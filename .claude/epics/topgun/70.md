---
name: Build DomainManager.vue, DnsRecordEditor.vue, and ApplicationDomainBinding.vue
status: open
created: 2025-10-06T15:23:47Z
updated: 2025-10-06T20:54:31Z
github: https://github.com/johnproblems/topgun/issues/201
depends_on: [66]
parallel: true
conflicts_with: []
---

# Task: Build DomainManager.vue, DnsRecordEditor.vue, and ApplicationDomainBinding.vue

## Description

Build a comprehensive suite of Vue.js 3 components for domain management and DNS configuration within the Coolify Enterprise platform. These components provide organization administrators with a powerful, intuitive interface for managing custom domains, editing DNS records, and binding domains to applicationsâ€”all while maintaining the enterprise's white-label branding.

This task creates three interconnected Vue.js components that work together to provide complete domain management functionality:

1. **DomainManager.vue** - The primary domain management interface where users can view all organization domains, check availability, register new domains, renew existing domains, transfer domains from other registrars, and configure DNS settings. This component acts as the central hub for all domain-related operations.

2. **DnsRecordEditor.vue** - A specialized component for creating, editing, and deleting DNS records (A, AAAA, CNAME, MX, TXT, NS, SRV). It provides real-time validation, DNS propagation checking, and intelligent suggestions for common configurations (like email setup, CDN integration, and domain verification).

3. **ApplicationDomainBinding.vue** - A component for associating custom domains with deployed applications. It handles domain verification, automatic DNS record creation, SSL certificate provisioning via Let's Encrypt, and displays binding status with health checks.

**Integration with Enterprise Architecture:**

These components integrate deeply with the backend domain management system:
- **DomainRegistrarService** (Task 66) - Handles domain registration, renewal, and transfer operations
- **DnsManagementService** (Task 67) - Manages DNS record CRUD operations across multiple providers
- **WhiteLabelConfig** - Displays branding consistently throughout domain management
- **Organization Model** - Enforces organization-scoped domain ownership
- **Application Model** - Links domains to deployed applications with automatic proxy configuration

**Why This Task Is Critical:**

Domain management is a cornerstone of professional application deployment. These components transform Coolify from a tool that requires users to manually configure DNS elsewhere into a comprehensive platform where domains are managed alongside infrastructure and deployments. For enterprise customers, this means:

- **Reduced Friction:** Register and configure domains without leaving the platform
- **Automatic Configuration:** DNS records created automatically when binding domains to applications
- **SSL Automation:** Let's Encrypt integration provides automatic HTTPS for all custom domains
- **White-Label Consistency:** Domain management respects organization branding throughout the UI
- **Audit Trail:** All domain operations logged for compliance and debugging

## Acceptance Criteria

### DomainManager.vue Component
- [ ] Display paginated list of organization domains with search and filtering
- [ ] Domain availability checker with real-time validation
- [ ] Domain registration flow with WHOIS privacy, auto-renewal, and contact management
- [ ] Domain renewal functionality with expiration warnings (30/60/90 day alerts)
- [ ] Domain transfer flow with authorization code handling
- [ ] Domain deletion with confirmation and safety checks
- [ ] DNS settings quick access with link to DnsRecordEditor
- [ ] Domain verification status display (verified, pending, failed)
- [ ] Integration with multiple registrars (Namecheap, Route53, Cloudflare)
- [ ] Responsive design working on mobile, tablet, desktop
- [ ] Loading states for async operations
- [ ] Error handling with user-friendly messages
- [ ] Accessibility compliance (ARIA labels, keyboard navigation, screen reader support)

### DnsRecordEditor.vue Component
- [ ] Display all DNS records for a domain in a structured table
- [ ] Create new DNS records with record type selection (A, AAAA, CNAME, MX, TXT, NS, SRV)
- [ ] Edit existing DNS records with validation
- [ ] Delete DNS records with confirmation
- [ ] Bulk import DNS records from JSON/CSV
- [ ] DNS record templates for common configurations (email, CDN, verification)
- [ ] Real-time validation for record values (IP addresses, domains, priorities)
- [ ] DNS propagation checker with global location testing
- [ ] TTL configuration with intelligent defaults
- [ ] Record conflict detection (e.g., CNAME + A record on same subdomain)
- [ ] Export DNS records to JSON/CSV
- [ ] Integration with DNS providers (Cloudflare, Route53, DigitalOcean DNS)

### ApplicationDomainBinding.vue Component
- [ ] Display all domains bound to an application
- [ ] Add new domain binding with availability check
- [ ] Domain verification workflow (DNS TXT record method, file upload method)
- [ ] Automatic DNS record creation (A/AAAA pointing to application server)
- [ ] SSL certificate provisioning status with Let's Encrypt integration
- [ ] Certificate renewal countdown and auto-renewal status
- [ ] Domain health checks (DNS resolution, SSL validity, HTTP response)
- [ ] Remove domain binding with cleanup (DNS records, SSL certificates)
- [ ] Primary domain designation for redirects
- [ ] WWW vs non-WWW configuration
- [ ] Force HTTPS configuration
- [ ] Custom error pages for domain-specific 404/500 errors

### General Requirements (All Components)
- [ ] Vue 3 Composition API with TypeScript-style prop definitions
- [ ] Inertia.js integration for server communication
- [ ] Real-time form validation with error display
- [ ] Optimistic UI updates with rollback on failure
- [ ] WebSocket integration for long-running operations (DNS propagation, SSL provisioning)
- [ ] Dark mode support matching Coolify's theme system
- [ ] Comprehensive unit tests with Vitest/Vue Test Utils (>85% coverage)
- [ ] Integration with organization white-label branding
- [ ] Performance: initial render < 500ms, interactions < 100ms

## Technical Details

### File Paths

**Vue Components:**
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/DomainManager.vue`
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/DnsRecordEditor.vue`
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/ApplicationDomainBinding.vue`

**Supporting Components:**
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/DomainAvailabilityChecker.vue`
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/DomainRegistrationForm.vue`
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/DnsRecordForm.vue`
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/DnsPropagationStatus.vue`
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/SslCertificateStatus.vue`

**Backend Integration:**
- `/home/topgun/topgun/app/Http/Controllers/Enterprise/DomainController.php` (existing, from Task 66)
- `/home/topgun/topgun/app/Http/Controllers/Enterprise/DnsRecordController.php` (existing, from Task 67)
- `/home/topgun/topgun/app/Http/Controllers/Enterprise/ApplicationDomainController.php` (new)

**Routes:**
- `/home/topgun/topgun/routes/web.php` (domain management routes)

**Test Files:**
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/__tests__/DomainManager.spec.js`
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/__tests__/DnsRecordEditor.spec.js`
- `/home/topgun/topgun/resources/js/Components/Enterprise/Domain/__tests__/ApplicationDomainBinding.spec.js`

### Component 1: DomainManager.vue

**File:** `resources/js/Components/Enterprise/Domain/DomainManager.vue`

```vue
<script setup>
import { ref, computed, onMounted } from 'vue'
import { router, useForm, usePage } from '@inertiajs/vue3'
import DomainAvailabilityChecker from './DomainAvailabilityChecker.vue'
import DomainRegistrationForm from './DomainRegistrationForm.vue'
import DnsRecordEditor from './DnsRecordEditor.vue'

const props = defineProps({
  organizationId: {
    type: Number,
    required: true,
  },
  domains: {
    type: Array,
    default: () => [],
  },
  registrars: {
    type: Array,
    default: () => [],
  },
  pagination: {
    type: Object,
    default: () => ({}),
  },
})

const emit = defineEmits(['domain-registered', 'domain-renewed', 'domain-deleted'])

// State
const showRegistrationModal = ref(false)
const showDnsEditorModal = ref(false)
const selectedDomain = ref(null)
const searchQuery = ref('')
const filterStatus = ref('all') // all, active, expiring, expired
const sortBy = ref('name') // name, expires_at, created_at
const sortDirection = ref('asc')

// Forms
const renewForm = useForm({
  domain_id: null,
  years: 1,
})

const deleteForm = useForm({
  domain_id: null,
})

// Computed
const filteredDomains = computed(() => {
  let filtered = props.domains

  // Search filter
  if (searchQuery.value) {
    filtered = filtered.filter(domain =>
      domain.name.toLowerCase().includes(searchQuery.value.toLowerCase())
    )
  }

  // Status filter
  if (filterStatus.value !== 'all') {
    const now = new Date()
    filtered = filtered.filter(domain => {
      const expiresAt = new Date(domain.expires_at)
      const daysUntilExpiry = Math.ceil((expiresAt - now) / (1000 * 60 * 60 * 24))

      switch (filterStatus.value) {
        case 'active':
          return daysUntilExpiry > 30
        case 'expiring':
          return daysUntilExpiry <= 30 && daysUntilExpiry > 0
        case 'expired':
          return daysUntilExpiry <= 0
        default:
          return true
      }
    })
  }

  // Sorting
  filtered.sort((a, b) => {
    let aVal = a[sortBy.value]
    let bVal = b[sortBy.value]

    if (sortBy.value === 'expires_at' || sortBy.value === 'created_at') {
      aVal = new Date(aVal)
      bVal = new Date(bVal)
    }

    if (sortDirection.value === 'asc') {
      return aVal > bVal ? 1 : -1
    } else {
      return aVal < bVal ? 1 : -1
    }
  })

  return filtered
})

const expiringDomains = computed(() => {
  const now = new Date()
  return props.domains.filter(domain => {
    const expiresAt = new Date(domain.expires_at)
    const daysUntilExpiry = Math.ceil((expiresAt - now) / (1000 * 60 * 60 * 24))
    return daysUntilExpiry <= 30 && daysUntilExpiry > 0
  })
})

// Methods
const openRegistrationModal = () => {
  showRegistrationModal.value = true
}

const openDnsEditor = (domain) => {
  selectedDomain.value = domain
  showDnsEditorModal.value = true
}

const renewDomain = (domain) => {
  if (!confirm(`Renew ${domain.name} for 1 year?`)) return

  renewForm.domain_id = domain.id

  renewForm.post(route('enterprise.domains.renew', {
    organization: props.organizationId,
    domain: domain.id,
  }), {
    onSuccess: () => {
      emit('domain-renewed', domain)
      renewForm.reset()
    },
    onError: (errors) => {
      alert(errors.message || 'Failed to renew domain')
    },
  })
}

const deleteDomain = (domain) => {
  if (!confirm(`Delete ${domain.name}? This action cannot be undone.`)) return

  deleteForm.domain_id = domain.id

  deleteForm.delete(route('enterprise.domains.destroy', {
    organization: props.organizationId,
    domain: domain.id,
  }), {
    onSuccess: () => {
      emit('domain-deleted', domain)
    },
    onError: (errors) => {
      alert(errors.message || 'Failed to delete domain')
    },
  })
}

const getExpiryClass = (domain) => {
  const now = new Date()
  const expiresAt = new Date(domain.expires_at)
  const daysUntilExpiry = Math.ceil((expiresAt - now) / (1000 * 60 * 60 * 24))

  if (daysUntilExpiry <= 0) return 'text-red-600 dark:text-red-400'
  if (daysUntilExpiry <= 30) return 'text-yellow-600 dark:text-yellow-400'
  return 'text-gray-600 dark:text-gray-400'
}

const formatDate = (dateString) => {
  return new Date(dateString).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
  })
}

const toggleSort = (field) => {
  if (sortBy.value === field) {
    sortDirection.value = sortDirection.value === 'asc' ? 'desc' : 'asc'
  } else {
    sortBy.value = field
    sortDirection.value = 'asc'
  }
}

onMounted(() => {
  // Check for expiring domains and show notifications
  if (expiringDomains.value.length > 0) {
    console.log(`${expiringDomains.value.length} domain(s) expiring soon`)
  }
})
</script>

<template>
  <div class="domain-manager">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <div>
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
          Domain Management
        </h2>
        <p class="text-gray-600 dark:text-gray-400 mt-1">
          Manage domains for {{ organizationId }}
        </p>
      </div>

      <button
        @click="openRegistrationModal"
        class="btn btn-primary"
      >
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        Register Domain
      </button>
    </div>

    <!-- Expiring Domains Alert -->
    <div
      v-if="expiringDomains.length > 0"
      class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 mb-6"
    >
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm text-yellow-700 dark:text-yellow-300">
            <span class="font-medium">{{ expiringDomains.length }} domain{{ expiringDomains.length > 1 ? 's' : '' }} expiring soon!</span>
            Renew to avoid losing your domains.
          </p>
        </div>
      </div>
    </div>

    <!-- Search and Filters -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <!-- Search -->
        <div>
          <label for="search" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
            Search Domains
          </label>
          <input
            id="search"
            v-model="searchQuery"
            type="text"
            placeholder="Search by domain name..."
            class="input w-full"
          />
        </div>

        <!-- Status Filter -->
        <div>
          <label for="status" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
            Status
          </label>
          <select
            id="status"
            v-model="filterStatus"
            class="select w-full"
          >
            <option value="all">All Domains</option>
            <option value="active">Active</option>
            <option value="expiring">Expiring Soon</option>
            <option value="expired">Expired</option>
          </select>
        </div>

        <!-- Sort -->
        <div>
          <label for="sort" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
            Sort By
          </label>
          <select
            id="sort"
            v-model="sortBy"
            class="select w-full"
          >
            <option value="name">Name</option>
            <option value="expires_at">Expiration Date</option>
            <option value="created_at">Registration Date</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Domain List -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-900">
            <tr>
              <th
                scope="col"
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer"
                @click="toggleSort('name')"
              >
                Domain Name
                <span v-if="sortBy === 'name'">
                  {{ sortDirection === 'asc' ? 'â†‘' : 'â†“' }}
                </span>
              </th>
              <th
                scope="col"
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
              >
                Registrar
              </th>
              <th
                scope="col"
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer"
                @click="toggleSort('expires_at')"
              >
                Expires
                <span v-if="sortBy === 'expires_at'">
                  {{ sortDirection === 'asc' ? 'â†‘' : 'â†“' }}
                </span>
              </th>
              <th
                scope="col"
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
              >
                Status
              </th>
              <th
                scope="col"
                class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
              >
                Actions
              </th>
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
            <tr
              v-for="domain in filteredDomains"
              :key="domain.id"
              class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
            >
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <div class="text-sm font-medium text-gray-900 dark:text-white">
                    {{ domain.name }}
                  </div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-600 dark:text-gray-400">
                  {{ domain.registrar }}
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm" :class="getExpiryClass(domain)">
                  {{ formatDate(domain.expires_at) }}
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span
                  class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                  :class="{
                    'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': domain.status === 'active',
                    'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200': domain.status === 'pending',
                    'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200': domain.status === 'expired',
                  }"
                >
                  {{ domain.status }}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <button
                  @click="openDnsEditor(domain)"
                  class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3"
                  title="Manage DNS"
                >
                  DNS
                </button>
                <button
                  @click="renewDomain(domain)"
                  class="text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 mr-3"
                  :disabled="renewForm.processing"
                  title="Renew Domain"
                >
                  Renew
                </button>
                <button
                  @click="deleteDomain(domain)"
                  class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"
                  :disabled="deleteForm.processing"
                  title="Delete Domain"
                >
                  Delete
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Empty State -->
        <div
          v-if="filteredDomains.length === 0"
          class="text-center py-12"
        >
          <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
          </svg>
          <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">No domains found</h3>
          <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
            {{ searchQuery ? 'Try adjusting your search' : 'Get started by registering a domain' }}
          </p>
        </div>
      </div>

      <!-- Pagination -->
      <div
        v-if="pagination.total > pagination.per_page"
        class="bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6"
      >
        <div class="flex items-center justify-between">
          <div class="flex-1 flex justify-between sm:hidden">
            <a
              :href="pagination.prev_page_url"
              class="btn btn-secondary"
              :class="{ 'opacity-50 cursor-not-allowed': !pagination.prev_page_url }"
            >
              Previous
            </a>
            <a
              :href="pagination.next_page_url"
              class="btn btn-secondary ml-3"
              :class="{ 'opacity-50 cursor-not-allowed': !pagination.next_page_url }"
            >
              Next
            </a>
          </div>
          <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
            <div>
              <p class="text-sm text-gray-700 dark:text-gray-300">
                Showing
                <span class="font-medium">{{ pagination.from }}</span>
                to
                <span class="font-medium">{{ pagination.to }}</span>
                of
                <span class="font-medium">{{ pagination.total }}</span>
                results
              </p>
            </div>
            <div>
              <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                <!-- Pagination links here -->
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Registration Modal -->
    <DomainRegistrationForm
      v-if="showRegistrationModal"
      :organization-id="organizationId"
      :registrars="registrars"
      @close="showRegistrationModal = false"
      @registered="(domain) => {
        showRegistrationModal = false
        emit('domain-registered', domain)
      }"
    />

    <!-- DNS Editor Modal -->
    <DnsRecordEditor
      v-if="showDnsEditorModal && selectedDomain"
      :domain="selectedDomain"
      :organization-id="organizationId"
      @close="showDnsEditorModal = false"
    />
  </div>
</template>

<style scoped>
.btn {
  @apply px-4 py-2 rounded-lg font-medium transition-colors;
}

.btn-primary {
  @apply bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600;
}

.btn-secondary {
  @apply bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600;
}

.input {
  @apply block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
         focus:outline-none focus:ring-blue-500 focus:border-blue-500
         dark:bg-gray-700 dark:border-gray-600 dark:text-white;
}

.select {
  @apply block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm
         focus:outline-none focus:ring-blue-500 focus:border-blue-500
         dark:bg-gray-700 dark:border-gray-600 dark:text-white;
}
</style>
```

### Component 2: DnsRecordEditor.vue

**File:** `resources/js/Components/Enterprise/Domain/DnsRecordEditor.vue`

```vue
<script setup>
import { ref, computed } from 'vue'
import { useForm } from '@inertiajs/vue3'
import DnsRecordForm from './DnsRecordForm.vue'
import DnsPropagationStatus from './DnsPropagationStatus.vue'

const props = defineProps({
  domain: {
    type: Object,
    required: true,
  },
  organizationId: {
    type: Number,
    required: true,
  },
})

const emit = defineEmits(['close', 'record-created', 'record-updated', 'record-deleted'])

// State
const records = ref(props.domain.dns_records || [])
const showRecordForm = ref(false)
const editingRecord = ref(null)
const showPropagationChecker = ref(false)
const selectedRecordForPropagation = ref(null)
const recordTypeFilter = ref('all')
const searchQuery = ref('')

// Forms
const deleteForm = useForm({
  record_id: null,
})

// Computed
const recordTypes = computed(() => [
  { value: 'all', label: 'All Types' },
  { value: 'A', label: 'A (IPv4 Address)' },
  { value: 'AAAA', label: 'AAAA (IPv6 Address)' },
  { value: 'CNAME', label: 'CNAME (Alias)' },
  { value: 'MX', label: 'MX (Mail Exchange)' },
  { value: 'TXT', label: 'TXT (Text Record)' },
  { value: 'NS', label: 'NS (Name Server)' },
  { value: 'SRV', label: 'SRV (Service)' },
])

const filteredRecords = computed(() => {
  let filtered = records.value

  // Type filter
  if (recordTypeFilter.value !== 'all') {
    filtered = filtered.filter(record => record.type === recordTypeFilter.value)
  }

  // Search filter
  if (searchQuery.value) {
    const query = searchQuery.value.toLowerCase()
    filtered = filtered.filter(record =>
      record.name.toLowerCase().includes(query) ||
      record.value.toLowerCase().includes(query)
    )
  }

  return filtered
})

const recordsByType = computed(() => {
  const groups = {}
  records.value.forEach(record => {
    if (!groups[record.type]) {
      groups[record.type] = []
    }
    groups[record.type].push(record)
  })
  return groups
})

// Methods
const openRecordForm = (record = null) => {
  editingRecord.value = record
  showRecordForm.value = true
}

const closeRecordForm = () => {
  editingRecord.value = null
  showRecordForm.value = false
}

const handleRecordSaved = (record) => {
  if (editingRecord.value) {
    // Update existing record
    const index = records.value.findIndex(r => r.id === record.id)
    if (index !== -1) {
      records.value[index] = record
    }
    emit('record-updated', record)
  } else {
    // Add new record
    records.value.push(record)
    emit('record-created', record)
  }
  closeRecordForm()
}

const deleteRecord = (record) => {
  if (!confirm(`Delete ${record.type} record for ${record.name}?`)) return

  deleteForm.record_id = record.id

  deleteForm.delete(route('enterprise.dns-records.destroy', {
    organization: props.organizationId,
    domain: props.domain.id,
    record: record.id,
  }), {
    onSuccess: () => {
      records.value = records.value.filter(r => r.id !== record.id)
      emit('record-deleted', record)
      deleteForm.reset()
    },
    onError: (errors) => {
      alert(errors.message || 'Failed to delete DNS record')
    },
  })
}

const checkPropagation = (record) => {
  selectedRecordForPropagation.value = record
  showPropagationChecker.value = true
}

const exportRecords = () => {
  const data = JSON.stringify(records.value, null, 2)
  const blob = new Blob([data], { type: 'application/json' })
  const url = URL.createObjectURL(blob)
  const link = document.createElement('a')
  link.href = url
  link.download = `${props.domain.name}-dns-records.json`
  link.click()
  URL.revokeObjectURL(url)
}

const getRecordTypeColor = (type) => {
  const colors = {
    A: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',
    AAAA: 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200',
    CNAME: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',
    MX: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',
    TXT: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200',
    NS: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',
    SRV: 'bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200',
  }
  return colors[type] || 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200'
}
</script>

<template>
  <div
    class="fixed inset-0 z-50 overflow-y-auto"
    aria-labelledby="dns-editor-title"
    role="dialog"
    aria-modal="true"
  >
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
      <!-- Backdrop -->
      <div
        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
        aria-hidden="true"
        @click="emit('close')"
      ></div>

      <!-- Modal Panel -->
      <div
        class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"
      >
        <!-- Header -->
        <div class="bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4 border-b border-gray-200 dark:border-gray-700">
          <div class="flex justify-between items-center">
            <div>
              <h3 id="dns-editor-title" class="text-lg leading-6 font-medium text-gray-900 dark:text-white">
                DNS Records for {{ domain.name }}
              </h3>
              <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                {{ records.length }} record{{ records.length !== 1 ? 's' : '' }} configured
              </p>
            </div>
            <div class="flex space-x-2">
              <button
                @click="exportRecords"
                class="btn btn-secondary text-sm"
                title="Export Records"
              >
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
                Export
              </button>
              <button
                @click="openRecordForm()"
                class="btn btn-primary text-sm"
              >
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                Add Record
              </button>
              <button
                @click="emit('close')"
                class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"
              >
                <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Filters -->
        <div class="bg-gray-50 dark:bg-gray-900 px-4 py-3">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="type-filter" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Record Type
              </label>
              <select
                id="type-filter"
                v-model="recordTypeFilter"
                class="select w-full text-sm"
              >
                <option
                  v-for="type in recordTypes"
                  :key="type.value"
                  :value="type.value"
                >
                  {{ type.label }}
                </option>
              </select>
            </div>
            <div>
              <label for="record-search" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                Search
              </label>
              <input
                id="record-search"
                v-model="searchQuery"
                type="text"
                placeholder="Search by name or value..."
                class="input w-full text-sm"
              />
            </div>
          </div>
        </div>

        <!-- Records Table -->
        <div class="bg-white dark:bg-gray-800 px-4 py-5 sm:p-6">
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
              <thead class="bg-gray-50 dark:bg-gray-900">
                <tr>
                  <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">
                    Type
                  </th>
                  <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">
                    Name
                  </th>
                  <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">
                    Value
                  </th>
                  <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">
                    TTL
                  </th>
                  <th scope="col" class="px-3 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                <tr
                  v-for="record in filteredRecords"
                  :key="record.id"
                  class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
                >
                  <td class="px-3 py-4 whitespace-nowrap">
                    <span
                      class="px-2 py-1 text-xs font-semibold rounded"
                      :class="getRecordTypeColor(record.type)"
                    >
                      {{ record.type }}
                    </span>
                  </td>
                  <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">
                    {{ record.name || '@' }}
                  </td>
                  <td class="px-3 py-4 text-sm text-gray-600 dark:text-gray-400">
                    <div class="max-w-xs truncate" :title="record.value">
                      {{ record.value }}
                    </div>
                  </td>
                  <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400">
                    {{ record.ttl }}
                  </td>
                  <td class="px-3 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <button
                      @click="checkPropagation(record)"
                      class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3"
                      title="Check Propagation"
                    >
                      Check
                    </button>
                    <button
                      @click="openRecordForm(record)"
                      class="text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 mr-3"
                      title="Edit Record"
                    >
                      Edit
                    </button>
                    <button
                      @click="deleteRecord(record)"
                      class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"
                      :disabled="deleteForm.processing"
                      title="Delete Record"
                    >
                      Delete
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>

            <!-- Empty State -->
            <div
              v-if="filteredRecords.length === 0"
              class="text-center py-12"
            >
              <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
              <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">No DNS records</h3>
              <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                {{ searchQuery || recordTypeFilter !== 'all' ? 'No matching records found' : 'Get started by creating a DNS record' }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Record Form Modal -->
    <DnsRecordForm
      v-if="showRecordForm"
      :domain="domain"
      :organization-id="organizationId"
      :record="editingRecord"
      @close="closeRecordForm"
      @saved="handleRecordSaved"
    />

    <!-- Propagation Checker Modal -->
    <DnsPropagationStatus
      v-if="showPropagationChecker && selectedRecordForPropagation"
      :domain="domain"
      :record="selectedRecordForPropagation"
      @close="showPropagationChecker = false"
    />
  </div>
</template>

<style scoped>
.btn {
  @apply inline-flex items-center px-3 py-2 rounded-md font-medium transition-colors;
}

.btn-primary {
  @apply bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600;
}

.btn-secondary {
  @apply bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600;
}

.input {
  @apply block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
         focus:outline-none focus:ring-blue-500 focus:border-blue-500
         dark:bg-gray-700 dark:border-gray-600 dark:text-white;
}

.select {
  @apply block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm
         focus:outline-none focus:ring-blue-500 focus:border-blue-500
         dark:bg-gray-700 dark:border-gray-600 dark:text-white;
}
</style>
```

### Component 3: ApplicationDomainBinding.vue

**File:** `resources/js/Components/Enterprise/Domain/ApplicationDomainBinding.vue`

```vue
<script setup>
import { ref, computed, onMounted } from 'vue'
import { useForm } from '@inertiajs/vue3'
import SslCertificateStatus from './SslCertificateStatus.vue'

const props = defineProps({
  application: {
    type: Object,
    required: true,
  },
  organizationId: {
    type: Number,
    required: true,
  },
  availableDomains: {
    type: Array,
    default: () => [],
  },
})

const emit = defineEmits(['domain-bound', 'domain-unbound', 'ssl-provisioned'])

// State
const bindings = ref(props.application.domain_bindings || [])
const showAddDomainModal = ref(false)
const selectedBinding = ref(null)
const showSslStatusModal = ref(false)
const verificationMethod = ref('dns') // dns or file

// Forms
const bindForm = useForm({
  domain_id: null,
  subdomain: '',
  force_https: true,
  www_redirect: 'none', // none, www-to-non-www, non-www-to-www
})

const unbindForm = useForm({
  binding_id: null,
})

const verifyForm = useForm({
  binding_id: null,
  method: 'dns',
})

// Computed
const domainOptions = computed(() => {
  const boundDomainIds = bindings.value.map(b => b.domain_id)
  return props.availableDomains.filter(d => !boundDomainIds.includes(d.id))
})

const primaryBinding = computed(() => {
  return bindings.value.find(b => b.is_primary)
})

// Methods
const openAddDomainModal = () => {
  bindForm.reset()
  showAddDomainModal.value = true
}

const closeAddDomainModal = () => {
  showAddDomainModal.value = false
}

const bindDomain = () => {
  bindForm.post(route('enterprise.applications.domains.bind', {
    organization: props.organizationId,
    application: props.application.id,
  }), {
    onSuccess: (response) => {
      bindings.value.push(response.binding)
      emit('domain-bound', response.binding)
      closeAddDomainModal()
    },
    onError: (errors) => {
      console.error('Domain binding failed:', errors)
    },
  })
}

const unbindDomain = (binding) => {
  if (!confirm(`Unbind ${binding.full_domain} from this application?`)) return

  unbindForm.binding_id = binding.id

  unbindForm.delete(route('enterprise.applications.domains.unbind', {
    organization: props.organizationId,
    application: props.application.id,
    binding: binding.id,
  }), {
    onSuccess: () => {
      bindings.value = bindings.value.filter(b => b.id !== binding.id)
      emit('domain-unbound', binding)
      unbindForm.reset()
    },
    onError: (errors) => {
      alert(errors.message || 'Failed to unbind domain')
    },
  })
}

const verifyDomain = (binding) => {
  verifyForm.binding_id = binding.id
  verifyForm.method = verificationMethod.value

  verifyForm.post(route('enterprise.applications.domains.verify', {
    organization: props.organizationId,
    application: props.application.id,
    binding: binding.id,
  }), {
    onSuccess: (response) => {
      const index = bindings.value.findIndex(b => b.id === binding.id)
      if (index !== -1) {
        bindings.value[index] = response.binding
      }
    },
    onError: (errors) => {
      alert(errors.message || 'Domain verification failed')
    },
  })
}

const setPrimaryDomain = (binding) => {
  if (!confirm(`Set ${binding.full_domain} as primary domain?`)) return

  axios.post(route('enterprise.applications.domains.set-primary', {
    organization: props.organizationId,
    application: props.application.id,
    binding: binding.id,
  }))
  .then(response => {
    bindings.value = bindings.value.map(b => ({
      ...b,
      is_primary: b.id === binding.id,
    }))
  })
  .catch(error => {
    alert(error.response?.data?.message || 'Failed to set primary domain')
  })
}

const provisionSsl = (binding) => {
  axios.post(route('enterprise.applications.domains.provision-ssl', {
    organization: props.organizationId,
    application: props.application.id,
    binding: binding.id,
  }))
  .then(response => {
    const index = bindings.value.findIndex(b => b.id === binding.id)
    if (index !== -1) {
      bindings.value[index].ssl_status = 'provisioning'
    }
    emit('ssl-provisioned', binding)
  })
  .catch(error => {
    alert(error.response?.data?.message || 'Failed to provision SSL certificate')
  })
}

const openSslStatus = (binding) => {
  selectedBinding.value = binding
  showSslStatusModal.value = true
}

const getStatusBadge = (status) => {
  const badges = {
    pending: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200',
    verified: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',
    failed: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',
  }
  return badges[status] || badges.pending
}

const getSslStatusBadge = (status) => {
  const badges = {
    active: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',
    provisioning: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',
    expired: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',
    none: 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200',
  }
  return badges[status] || badges.none
}

onMounted(() => {
  // Set up WebSocket listener for SSL provisioning updates
  if (window.Echo) {
    window.Echo.private(`organization.${props.organizationId}`)
      .listen('SslProvisioningComplete', (event) => {
        const index = bindings.value.findIndex(b => b.id === event.binding_id)
        if (index !== -1) {
          bindings.value[index].ssl_status = 'active'
          bindings.value[index].ssl_expires_at = event.expires_at
        }
      })
  }
})
</script>

<template>
  <div class="application-domain-binding">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <div>
        <h3 class="text-lg font-medium text-gray-900 dark:text-white">
          Custom Domains
        </h3>
        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
          Bind custom domains to this application
        </p>
      </div>
      <button
        @click="openAddDomainModal"
        class="btn btn-primary"
        :disabled="domainOptions.length === 0"
      >
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        Add Domain
      </button>
    </div>

    <!-- Domain Bindings List -->
    <div class="space-y-4">
      <div
        v-for="binding in bindings"
        :key="binding.id"
        class="bg-white dark:bg-gray-800 rounded-lg shadow p-6"
      >
        <div class="flex justify-between items-start">
          <div class="flex-1">
            <div class="flex items-center">
              <h4 class="text-lg font-medium text-gray-900 dark:text-white">
                {{ binding.full_domain }}
              </h4>
              <span
                v-if="binding.is_primary"
                class="ml-2 px-2 py-1 text-xs font-semibold rounded bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"
              >
                Primary
              </span>
            </div>

            <!-- Status Badges -->
            <div class="mt-2 flex items-center space-x-2">
              <span
                class="px-2 py-1 text-xs font-semibold rounded"
                :class="getStatusBadge(binding.verification_status)"
              >
                {{ binding.verification_status }}
              </span>
              <span
                class="px-2 py-1 text-xs font-semibold rounded"
                :class="getSslStatusBadge(binding.ssl_status)"
              >
                SSL: {{ binding.ssl_status }}
              </span>
              <span
                v-if="binding.force_https"
                class="px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"
              >
                Force HTTPS
              </span>
            </div>

            <!-- Verification Instructions -->
            <div
              v-if="binding.verification_status === 'pending'"
              class="mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-md"
            >
              <h5 class="text-sm font-medium text-yellow-800 dark:text-yellow-200">
                Domain Verification Required
              </h5>
              <p class="mt-2 text-sm text-yellow-700 dark:text-yellow-300">
                Add this TXT record to verify ownership:
              </p>
              <div class="mt-2 p-2 bg-white dark:bg-gray-800 rounded font-mono text-xs">
                <div class="flex justify-between items-center">
                  <code class="text-gray-900 dark:text-white">
                    _coolify-verify.{{ binding.subdomain || binding.domain.name }}
                  </code>
                  <button
                    @click="navigator.clipboard.writeText(binding.verification_token)"
                    class="text-blue-600 hover:text-blue-800 dark:text-blue-400"
                    title="Copy verification token"
                  >
                    Copy
                  </button>
                </div>
                <div class="mt-1 text-gray-600 dark:text-gray-400">
                  TXT: {{ binding.verification_token }}
                </div>
              </div>
              <button
                @click="verifyDomain(binding)"
                class="mt-3 btn btn-sm btn-primary"
                :disabled="verifyForm.processing"
              >
                Verify Domain
              </button>
            </div>

            <!-- SSL Certificate Info -->
            <div
              v-if="binding.ssl_status === 'active' && binding.ssl_expires_at"
              class="mt-2 text-sm text-gray-600 dark:text-gray-400"
            >
              SSL Certificate expires: {{ new Date(binding.ssl_expires_at).toLocaleDateString() }}
            </div>
          </div>

          <!-- Actions -->
          <div class="ml-4 flex flex-col space-y-2">
            <button
              v-if="binding.verification_status === 'verified' && binding.ssl_status === 'none'"
              @click="provisionSsl(binding)"
              class="btn btn-sm btn-secondary"
            >
              Provision SSL
            </button>
            <button
              v-if="binding.ssl_status === 'active'"
              @click="openSslStatus(binding)"
              class="btn btn-sm btn-secondary"
            >
              SSL Details
            </button>
            <button
              v-if="!binding.is_primary"
              @click="setPrimaryDomain(binding)"
              class="btn btn-sm btn-secondary"
            >
              Set Primary
            </button>
            <button
              @click="unbindDomain(binding)"
              class="btn btn-sm btn-danger"
              :disabled="unbindForm.processing"
            >
              Remove
            </button>
          </div>
        </div>

        <!-- Health Check -->
        <div
          v-if="binding.last_health_check"
          class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"
        >
          <div class="flex items-center text-sm">
            <div
              class="w-2 h-2 rounded-full mr-2"
              :class="{
                'bg-green-500': binding.last_health_check.status === 'healthy',
                'bg-red-500': binding.last_health_check.status === 'unhealthy',
                'bg-yellow-500': binding.last_health_check.status === 'degraded',
              }"
            ></div>
            <span class="text-gray-600 dark:text-gray-400">
              Last checked: {{ new Date(binding.last_health_check.checked_at).toLocaleString() }}
            </span>
            <span class="ml-4 text-gray-600 dark:text-gray-400">
              Response time: {{ binding.last_health_check.response_time }}ms
            </span>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div
        v-if="bindings.length === 0"
        class="text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow"
      >
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">No custom domains</h3>
        <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
          Get started by adding a custom domain to this application
        </p>
        <div class="mt-6">
          <button
            @click="openAddDomainModal"
            class="btn btn-primary"
            :disabled="domainOptions.length === 0"
          >
            Add Domain
          </button>
        </div>
      </div>
    </div>

    <!-- Add Domain Modal -->
    <div
      v-if="showAddDomainModal"
      class="fixed inset-0 z-50 overflow-y-auto"
      aria-labelledby="add-domain-title"
      role="dialog"
      aria-modal="true"
    >
      <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <!-- Backdrop -->
        <div
          class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
          aria-hidden="true"
          @click="closeAddDomainModal"
        ></div>

        <!-- Modal Panel -->
        <div
          class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
        >
          <form @submit.prevent="bindDomain">
            <div class="bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
              <h3 id="add-domain-title" class="text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4">
                Add Custom Domain
              </h3>

              <!-- Domain Selection -->
              <div class="mb-4">
                <label for="domain" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Select Domain
                </label>
                <select
                  id="domain"
                  v-model="bindForm.domain_id"
                  class="select w-full"
                  required
                >
                  <option :value="null" disabled>Choose a domain...</option>
                  <option
                    v-for="domain in domainOptions"
                    :key="domain.id"
                    :value="domain.id"
                  >
                    {{ domain.name }}
                  </option>
                </select>
              </div>

              <!-- Subdomain -->
              <div class="mb-4">
                <label for="subdomain" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  Subdomain (optional)
                </label>
                <input
                  id="subdomain"
                  v-model="bindForm.subdomain"
                  type="text"
                  placeholder="www or app or leave empty"
                  class="input w-full"
                />
                <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                  Leave empty to use root domain
                </p>
              </div>

              <!-- Force HTTPS -->
              <div class="mb-4">
                <label class="flex items-center">
                  <input
                    v-model="bindForm.force_https"
                    type="checkbox"
                    class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                  />
                  <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">
                    Force HTTPS (redirect HTTP to HTTPS)
                  </span>
                </label>
              </div>

              <!-- WWW Redirect -->
              <div class="mb-4">
                <label for="www-redirect" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                  WWW Redirect
                </label>
                <select
                  id="www-redirect"
                  v-model="bindForm.www_redirect"
                  class="select w-full"
                >
                  <option value="none">No redirect</option>
                  <option value="www-to-non-www">Redirect www to non-www</option>
                  <option value="non-www-to-www">Redirect non-www to www</option>
                </select>
              </div>

              <!-- Error Display -->
              <div
                v-if="bindForm.errors.domain_id"
                class="mt-2 text-sm text-red-600 dark:text-red-400"
              >
                {{ bindForm.errors.domain_id }}
              </div>
            </div>

            <div class="bg-gray-50 dark:bg-gray-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
              <button
                type="submit"
                class="btn btn-primary w-full sm:w-auto sm:ml-3"
                :disabled="bindForm.processing"
              >
                {{ bindForm.processing ? 'Adding...' : 'Add Domain' }}
              </button>
              <button
                type="button"
                @click="closeAddDomainModal"
                class="btn btn-secondary w-full sm:w-auto mt-3 sm:mt-0"
              >
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- SSL Status Modal -->
    <SslCertificateStatus
      v-if="showSslStatusModal && selectedBinding"
      :binding="selectedBinding"
      @close="showSslStatusModal = false"
    />
  </div>
</template>

<style scoped>
.btn {
  @apply px-4 py-2 rounded-lg font-medium transition-colors;
}

.btn-sm {
  @apply px-3 py-1 text-sm;
}

.btn-primary {
  @apply bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600;
}

.btn-secondary {
  @apply bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600;
}

.btn-danger {
  @apply bg-red-600 text-white hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600;
}

.input {
  @apply block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
         focus:outline-none focus:ring-blue-500 focus:border-blue-500
         dark:bg-gray-700 dark:border-gray-600 dark:text-white;
}

.select {
  @apply block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm
         focus:outline-none focus:ring-blue-500 focus:border-blue-500
         dark:bg-gray-700 dark:border-gray-600 dark:text-white;
}
</style>
```

### Backend Controller

**File:** `app/Http/Controllers/Enterprise/ApplicationDomainController.php`

```php
<?php

namespace App\Http\Controllers\Enterprise;

use App\Http\Controllers\Controller;
use App\Models\Organization;
use App\Models\Application;
use App\Models\ApplicationDomainBinding;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Log;

class ApplicationDomainController extends Controller
{
    /**
     * Bind a domain to an application
     */
    public function bind(Request $request, Organization $organization, Application $application)
    {
        $this->authorize('update', $application);

        $validated = $request->validate([
            'domain_id' => 'required|exists:organization_domains,id',
            'subdomain' => 'nullable|string|max:255',
            'force_https' => 'boolean',
            'www_redirect' => 'required|in:none,www-to-non-www,non-www-to-www',
        ]);

        // Check if domain belongs to organization
        $domain = $organization->domains()->findOrFail($validated['domain_id']);

        // Check for existing binding
        $exists = ApplicationDomainBinding::where('application_id', $application->id)
            ->where('domain_id', $domain->id)
            ->where('subdomain', $validated['subdomain'] ?? null)
            ->exists();

        if ($exists) {
            return back()->withErrors(['domain_id' => 'This domain is already bound to this application']);
        }

        // Create binding
        $binding = ApplicationDomainBinding::create([
            'application_id' => $application->id,
            'domain_id' => $domain->id,
            'subdomain' => $validated['subdomain'] ?? null,
            'force_https' => $validated['force_https'] ?? true,
            'www_redirect' => $validated['www_redirect'],
            'verification_status' => 'pending',
            'verification_token' => bin2hex(random_bytes(32)),
            'ssl_status' => 'none',
        ]);

        // Generate full domain
        $fullDomain = $validated['subdomain']
            ? "{$validated['subdomain']}.{$domain->name}"
            : $domain->name;

        $binding->update(['full_domain' => $fullDomain]);

        Log::info('Domain bound to application', [
            'application_id' => $application->id,
            'domain' => $fullDomain,
        ]);

        return back()->with('success', "Domain {$fullDomain} added to application");
    }

    /**
     * Unbind a domain from an application
     */
    public function unbind(Organization $organization, Application $application, ApplicationDomainBinding $binding)
    {
        $this->authorize('update', $application);

        // Verify binding belongs to this application
        if ($binding->application_id !== $application->id) {
            abort(404);
        }

        $domain = $binding->full_domain;

        // Delete DNS records created by this binding
        // Delete SSL certificate
        // Remove from proxy configuration

        $binding->delete();

        Log::info('Domain unbound from application', [
            'application_id' => $application->id,
            'domain' => $domain,
        ]);

        return back()->with('success', "Domain {$domain} removed from application");
    }

    /**
     * Verify domain ownership
     */
    public function verify(Request $request, Organization $organization, Application $application, ApplicationDomainBinding $binding)
    {
        $this->authorize('update', $application);

        $validated = $request->validate([
            'method' => 'required|in:dns,file',
        ]);

        // Verify binding belongs to this application
        if ($binding->application_id !== $application->id) {
            abort(404);
        }

        // Check verification based on method
        if ($validated['method'] === 'dns') {
            // Check for TXT record with verification token
            $txtRecords = dns_get_record("_coolify-verify.{$binding->full_domain}", DNS_TXT);

            $verified = collect($txtRecords)->contains(function ($record) use ($binding) {
                return isset($record['txt']) && $record['txt'] === $binding->verification_token;
            });
        } else {
            // File-based verification (check for .well-known/coolify-verify.txt)
            $verified = false; // Implement file check
        }

        if ($verified) {
            $binding->update([
                'verification_status' => 'verified',
                'verified_at' => now(),
            ]);

            // Trigger automatic DNS record creation
            // Trigger SSL certificate provisioning

            return back()->with('success', 'Domain verified successfully');
        }

        return back()->withErrors(['verification' => 'Domain verification failed. Please check DNS records.']);
    }

    /**
     * Set primary domain
     */
    public function setPrimary(Organization $organization, Application $application, ApplicationDomainBinding $binding)
    {
        $this->authorize('update', $application);

        // Verify binding belongs to this application
        if ($binding->application_id !== $application->id) {
            abort(404);
        }

        // Remove primary flag from all bindings
        ApplicationDomainBinding::where('application_id', $application->id)
            ->update(['is_primary' => false]);

        // Set this binding as primary
        $binding->update(['is_primary' => true]);

        return response()->json([
            'success' => true,
            'message' => 'Primary domain updated',
        ]);
    }

    /**
     * Provision SSL certificate
     */
    public function provisionSsl(Organization $organization, Application $application, ApplicationDomainBinding $binding)
    {
        $this->authorize('update', $application);

        // Verify binding belongs to this application and is verified
        if ($binding->application_id !== $application->id || $binding->verification_status !== 'verified') {
            abort(404);
        }

        // Dispatch job to provision SSL via Let's Encrypt
        // ProvisionSslCertificateJob::dispatch($binding);

        $binding->update(['ssl_status' => 'provisioning']);

        return response()->json([
            'success' => true,
            'message' => 'SSL provisioning started',
        ]);
    }
}
```

## Implementation Approach

### Step 1: Create Component Directory Structure
1. Create `resources/js/Components/Enterprise/Domain/` directory
2. Set up component file structure (main components + supporting components)
3. Create test directory: `__tests__/`

### Step 2: Build DomainManager.vue
1. Create component with domain list, search, filtering, and sorting
2. Implement domain registration modal integration
3. Add domain renewal and deletion functionality
4. Connect to backend domain routes
5. Add pagination support
6. Implement expiring domain alerts

### Step 3: Build DnsRecordEditor.vue
1. Create modal component with DNS record table
2. Implement record CRUD operations (create, edit, delete)
3. Add record type-specific validation (A, AAAA, CNAME, MX, TXT, NS, SRV)
4. Create DNS record form component
5. Add propagation checker integration
6. Implement import/export functionality

### Step 4: Build ApplicationDomainBinding.vue
1. Create component for displaying bound domains
2. Implement domain binding form with verification flow
3. Add SSL provisioning status display
4. Create domain health check display
5. Implement primary domain selection
6. Add WWW redirect configuration

### Step 5: Create Supporting Components
1. **DomainAvailabilityChecker.vue** - Real-time domain availability checking
2. **DomainRegistrationForm.vue** - Multi-step registration wizard
3. **DnsRecordForm.vue** - Form for creating/editing DNS records
4. **DnsPropagationStatus.vue** - Global DNS propagation checker
5. **SslCertificateStatus.vue** - SSL certificate details and expiry

### Step 6: Backend Integration
1. Create ApplicationDomainController with bind/unbind/verify methods
2. Add routes for domain binding operations
3. Implement domain verification logic (DNS TXT record check)
4. Add SSL provisioning queue job
5. Create health check system for bound domains

### Step 7: WebSocket Integration
1. Set up Laravel Reverb channels for real-time updates
2. Broadcast DNS propagation status updates
3. Broadcast SSL provisioning completion events
4. Add health check status updates

### Step 8: Testing
1. Write unit tests for each component (Vitest + Vue Test Utils)
2. Write integration tests for backend controllers
3. Test domain verification workflow end-to-end
4. Test SSL provisioning workflow
5. Browser tests for critical user journeys

## Test Strategy

### Unit Tests (Vitest)

**File:** `resources/js/Components/Enterprise/Domain/__tests__/DomainManager.spec.js`

```javascript
import { mount } from '@vue/test-utils'
import { describe, it, expect, vi } from 'vitest'
import DomainManager from '../DomainManager.vue'
import { router } from '@inertiajs/vue3'

vi.mock('@inertiajs/vue3', () => ({
  router: {
    post: vi.fn(),
    delete: vi.fn(),
  },
  useForm: vi.fn(() => ({
    domain_id: null,
    processing: false,
    errors: {},
    post: vi.fn(),
    delete: vi.fn(),
    reset: vi.fn(),
  })),
  usePage: vi.fn(() => ({
    props: {
      value: {
        auth: { user: { id: 1 } },
      },
    },
  })),
}))

describe('DomainManager.vue', () => {
  it('renders domain list', () => {
    const wrapper = mount(DomainManager, {
      props: {
        organizationId: 1,
        domains: [
          {
            id: 1,
            name: 'example.com',
            registrar: 'Namecheap',
            expires_at: '2025-12-31',
            status: 'active',
          },
        ],
        registrars: [],
        pagination: { total: 1, per_page: 10 },
      },
    })

    expect(wrapper.text()).toContain('example.com')
    expect(wrapper.text()).toContain('Namecheap')
  })

  it('filters domains by search query', async () => {
    const wrapper = mount(DomainManager, {
      props: {
        organizationId: 1,
        domains: [
          { id: 1, name: 'example.com', registrar: 'Namecheap', expires_at: '2025-12-31', status: 'active' },
          { id: 2, name: 'test.com', registrar: 'Route53', expires_at: '2025-12-31', status: 'active' },
        ],
        registrars: [],
        pagination: {},
      },
    })

    const searchInput = wrapper.find('input[type="text"]')
    await searchInput.setValue('example')

    expect(wrapper.vm.filteredDomains).toHaveLength(1)
    expect(wrapper.vm.filteredDomains[0].name).toBe('example.com')
  })

  it('shows expiring domains alert', () => {
    const tomorrow = new Date()
    tomorrow.setDate(tomorrow.getDate() + 1)

    const wrapper = mount(DomainManager, {
      props: {
        organizationId: 1,
        domains: [
          {
            id: 1,
            name: 'expiring.com',
            registrar: 'Namecheap',
            expires_at: tomorrow.toISOString(),
            status: 'active',
          },
        ],
        registrars: [],
        pagination: {},
      },
    })

    expect(wrapper.vm.expiringDomains).toHaveLength(1)
    expect(wrapper.text()).toContain('expiring soon')
  })

  it('opens registration modal', async () => {
    const wrapper = mount(DomainManager, {
      props: {
        organizationId: 1,
        domains: [],
        registrars: [],
        pagination: {},
      },
    })

    const registerButton = wrapper.find('button:contains("Register Domain")')
    await registerButton.trigger('click')

    expect(wrapper.vm.showRegistrationModal).toBe(true)
  })
})
```

**File:** `resources/js/Components/Enterprise/Domain/__tests__/DnsRecordEditor.spec.js`

```javascript
import { mount } from '@vue/test-utils'
import { describe, it, expect, vi } from 'vitest'
import DnsRecordEditor from '../DnsRecordEditor.vue'

describe('DnsRecordEditor.vue', () => {
  it('renders DNS records table', () => {
    const wrapper = mount(DnsRecordEditor, {
      props: {
        domain: {
          id: 1,
          name: 'example.com',
          dns_records: [
            { id: 1, type: 'A', name: '@', value: '192.0.2.1', ttl: 3600 },
            { id: 2, type: 'MX', name: '@', value: 'mail.example.com', ttl: 3600, priority: 10 },
          ],
        },
        organizationId: 1,
      },
    })

    expect(wrapper.text()).toContain('192.0.2.1')
    expect(wrapper.text()).toContain('mail.example.com')
  })

  it('filters records by type', async () => {
    const wrapper = mount(DnsRecordEditor, {
      props: {
        domain: {
          id: 1,
          name: 'example.com',
          dns_records: [
            { id: 1, type: 'A', name: '@', value: '192.0.2.1', ttl: 3600 },
            { id: 2, type: 'MX', name: '@', value: 'mail.example.com', ttl: 3600 },
          ],
        },
        organizationId: 1,
      },
    })

    await wrapper.setData({ recordTypeFilter: 'A' })

    expect(wrapper.vm.filteredRecords).toHaveLength(1)
    expect(wrapper.vm.filteredRecords[0].type).toBe('A')
  })

  it('opens record form for editing', async () => {
    const wrapper = mount(DnsRecordEditor, {
      props: {
        domain: {
          id: 1,
          name: 'example.com',
          dns_records: [
            { id: 1, type: 'A', name: '@', value: '192.0.2.1', ttl: 3600 },
          ],
        },
        organizationId: 1,
      },
    })

    const editButton = wrapper.find('button:contains("Edit")')
    await editButton.trigger('click')

    expect(wrapper.vm.showRecordForm).toBe(true)
    expect(wrapper.vm.editingRecord).toBeTruthy()
  })

  it('exports records to JSON', async () => {
    global.URL.createObjectURL = vi.fn()
    global.URL.revokeObjectURL = vi.fn()

    const wrapper = mount(DnsRecordEditor, {
      props: {
        domain: {
          id: 1,
          name: 'example.com',
          dns_records: [
            { id: 1, type: 'A', name: '@', value: '192.0.2.1', ttl: 3600 },
          ],
        },
        organizationId: 1,
      },
    })

    await wrapper.vm.exportRecords()

    expect(global.URL.createObjectURL).toHaveBeenCalled()
  })
})
```

**File:** `resources/js/Components/Enterprise/Domain/__tests__/ApplicationDomainBinding.spec.js`

```javascript
import { mount } from '@vue/test-utils'
import { describe, it, expect, vi } from 'vitest'
import ApplicationDomainBinding from '../ApplicationDomainBinding.vue'

describe('ApplicationDomainBinding.vue', () => {
  it('renders domain bindings', () => {
    const wrapper = mount(ApplicationDomainBinding, {
      props: {
        application: {
          id: 1,
          name: 'My App',
          domain_bindings: [
            {
              id: 1,
              full_domain: 'app.example.com',
              verification_status: 'verified',
              ssl_status: 'active',
              is_primary: true,
            },
          ],
        },
        organizationId: 1,
        availableDomains: [],
      },
    })

    expect(wrapper.text()).toContain('app.example.com')
    expect(wrapper.text()).toContain('Primary')
  })

  it('shows verification instructions for pending domains', () => {
    const wrapper = mount(ApplicationDomainBinding, {
      props: {
        application: {
          id: 1,
          domain_bindings: [
            {
              id: 1,
              full_domain: 'pending.example.com',
              verification_status: 'pending',
              verification_token: 'abc123',
              ssl_status: 'none',
            },
          ],
        },
        organizationId: 1,
        availableDomains: [],
      },
    })

    expect(wrapper.text()).toContain('Domain Verification Required')
    expect(wrapper.text()).toContain('abc123')
  })

  it('opens add domain modal', async () => {
    const wrapper = mount(ApplicationDomainBinding, {
      props: {
        application: {
          id: 1,
          domain_bindings: [],
        },
        organizationId: 1,
        availableDomains: [
          { id: 1, name: 'example.com' },
        ],
      },
    })

    const addButton = wrapper.find('button:contains("Add Domain")')
    await addButton.trigger('click')

    expect(wrapper.vm.showAddDomainModal).toBe(true)
  })

  it('filters available domains to exclude already bound', () => {
    const wrapper = mount(ApplicationDomainBinding, {
      props: {
        application: {
          id: 1,
          domain_bindings: [
            { id: 1, domain_id: 1, full_domain: 'example.com' },
          ],
        },
        organizationId: 1,
        availableDomains: [
          { id: 1, name: 'example.com' },
          { id: 2, name: 'test.com' },
        ],
      },
    })

    expect(wrapper.vm.domainOptions).toHaveLength(1)
    expect(wrapper.vm.domainOptions[0].name).toBe('test.com')
  })
})
```

### Integration Tests (Pest)

**File:** `tests/Feature/Enterprise/ApplicationDomainBindingTest.php`

```php
<?php

use App\Models\Organization;
use App\Models\Application;
use App\Models\OrganizationDomain;
use App\Models\ApplicationDomainBinding;
use App\Models\User;

it('binds domain to application', function () {
    $organization = Organization::factory()->create();
    $application = Application::factory()->create(['organization_id' => $organization->id]);
    $domain = OrganizationDomain::factory()->create(['organization_id' => $organization->id]);
    $user = User::factory()->create();
    $organization->users()->attach($user, ['role' => 'admin']);

    $this->actingAs($user)
        ->post(route('enterprise.applications.domains.bind', [
            'organization' => $organization,
            'application' => $application,
        ]), [
            'domain_id' => $domain->id,
            'subdomain' => 'app',
            'force_https' => true,
            'www_redirect' => 'none',
        ])
        ->assertRedirect()
        ->assertSessionHas('success');

    $this->assertDatabaseHas('application_domain_bindings', [
        'application_id' => $application->id,
        'domain_id' => $domain->id,
        'subdomain' => 'app',
    ]);
});

it('unbinds domain from application', function () {
    $organization = Organization::factory()->create();
    $application = Application::factory()->create(['organization_id' => $organization->id]);
    $domain = OrganizationDomain::factory()->create(['organization_id' => $organization->id]);
    $binding = ApplicationDomainBinding::factory()->create([
        'application_id' => $application->id,
        'domain_id' => $domain->id,
    ]);
    $user = User::factory()->create();
    $organization->users()->attach($user, ['role' => 'admin']);

    $this->actingAs($user)
        ->delete(route('enterprise.applications.domains.unbind', [
            'organization' => $organization,
            'application' => $application,
            'binding' => $binding,
        ]))
        ->assertRedirect();

    $this->assertDatabaseMissing('application_domain_bindings', [
        'id' => $binding->id,
    ]);
});

it('verifies domain ownership via DNS', function () {
    $organization = Organization::factory()->create();
    $application = Application::factory()->create(['organization_id' => $organization->id]);
    $binding = ApplicationDomainBinding::factory()->create([
        'application_id' => $application->id,
        'verification_status' => 'pending',
        'verification_token' => 'test-token-123',
    ]);
    $user = User::factory()->create();
    $organization->users()->attach($user, ['role' => 'admin']);

    // Mock DNS lookup
    // In real implementation, would need to mock dns_get_record()

    $this->actingAs($user)
        ->post(route('enterprise.applications.domains.verify', [
            'organization' => $organization,
            'application' => $application,
            'binding' => $binding,
        ]), [
            'method' => 'dns',
        ]);

    // Would assert verification status updated if DNS check passed
});

it('sets primary domain', function () {
    $organization = Organization::factory()->create();
    $application = Application::factory()->create(['organization_id' => $organization->id]);
    $binding1 = ApplicationDomainBinding::factory()->create([
        'application_id' => $application->id,
        'is_primary' => true,
    ]);
    $binding2 = ApplicationDomainBinding::factory()->create([
        'application_id' => $application->id,
        'is_primary' => false,
    ]);
    $user = User::factory()->create();
    $organization->users()->attach($user, ['role' => 'admin']);

    $this->actingAs($user)
        ->post(route('enterprise.applications.domains.set-primary', [
            'organization' => $organization,
            'application' => $application,
            'binding' => $binding2,
        ]))
        ->assertSuccessful();

    expect($binding1->fresh()->is_primary)->toBeFalse();
    expect($binding2->fresh()->is_primary)->toBeTrue();
});
```

## Definition of Done

### Component Completion
- [ ] DomainManager.vue component created with all features
- [ ] DnsRecordEditor.vue component created with record CRUD
- [ ] ApplicationDomainBinding.vue component created with binding workflow
- [ ] DomainAvailabilityChecker.vue supporting component created
- [ ] DomainRegistrationForm.vue supporting component created
- [ ] DnsRecordForm.vue supporting component created
- [ ] DnsPropagationStatus.vue supporting component created
- [ ] SslCertificateStatus.vue supporting component created

### Backend Integration
- [ ] ApplicationDomainController created with all methods
- [ ] Domain binding routes registered
- [ ] Domain verification logic implemented (DNS TXT check)
- [ ] SSL provisioning job created
- [ ] Domain health check system implemented
- [ ] WebSocket events configured for real-time updates

### Features Complete
- [ ] Domain list with search, filter, sort
- [ ] Domain registration flow
- [ ] Domain renewal functionality
- [ ] DNS record CRUD operations
- [ ] DNS propagation checking
- [ ] Domain-to-application binding
- [ ] Domain verification workflow
- [ ] SSL provisioning automation
- [ ] Primary domain selection
- [ ] WWW redirect configuration
- [ ] Force HTTPS configuration

### Quality Assurance
- [ ] Unit tests written for all components (>85% coverage)
- [ ] Integration tests written for backend controllers (all scenarios)
- [ ] Domain verification workflow tested end-to-end
- [ ] SSL provisioning workflow tested
- [ ] Responsive design verified on all screen sizes
- [ ] Dark mode support implemented and tested
- [ ] Accessibility compliance verified (ARIA, keyboard nav)
- [ ] Performance benchmarks met (initial render < 500ms)

### Code Quality
- [ ] Vue 3 Composition API used throughout
- [ ] TypeScript-style prop definitions
- [ ] Inertia.js integration working correctly
- [ ] Code follows Coolify Vue.js patterns
- [ ] Components are reusable and composable
- [ ] PHPStan level 5 passing
- [ ] Laravel Pint formatting applied
- [ ] No console errors or warnings

### Documentation
- [ ] Component props and events documented
- [ ] Usage examples provided for each component
- [ ] Backend API endpoints documented
- [ ] Domain verification process documented
- [ ] SSL provisioning process documented
- [ ] Code reviewed and approved

## Related Tasks

- **Depends on:** Task 66 (DomainRegistrarService for domain operations)
- **Integrates with:** Task 67 (DnsManagementService for DNS operations)
- **Integrates with:** Task 68 (Let's Encrypt for SSL provisioning)
- **Integrates with:** Task 69 (Domain verification system)
- **Used by:** Organization administrators for complete domain management
- **Enhances:** Application deployment workflow with custom domain support
